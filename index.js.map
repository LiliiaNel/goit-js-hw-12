{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nconst API_KEY = \"49358880-33c4acc352e7c36c64dc2caaa\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n\nconst options = {\n    params: {\n        key: API_KEY ,\n        q: \"\",\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        per_page: 15,\n        page: 1,\n    }\n};\n\n\nexport default async function searchImages(query, page, callback) {\n    try {\n        options.params.q = query;\n        options.params.page = page;\n        const response = await axios.get(BASE_URL, options);\n        callback(response.data.hits, response.data.totalHits);\n    } catch (error) {\n        callback([], 1, 0); \n    };\n}\n\n\n\n","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport function showError() {\n  console.log(\"show error\");\n  iziToast.error({\n    title: '',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    backgroundColor: '#ef4040',\n    close: true,\n    position: 'topRight',\n    timeout: 3000,\n  });\n}\n\nexport function showInfo() {\n  iziToast.info({\n    title: '',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageSize: '16px',\n    messageLineHeight: '1.5',\n    layout: 1,\n    close: true,\n    position: 'topRight',\n    timeout: 3000,\n  });\n}\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector(\"ul.gallery\");\n\nfunction createGalleryMarkup(images) {\n    return images\n      .map(({ comments, downloads, largeImageURL, likes, webformatURL, views, tags }) => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <ul class=\"image-text-list\">\n          <li><span class=\"img-text\">Likes</span> ${likes}</a></li>\n          <li><span class=\"img-text\">Views</span> ${views}</a></li>\n          <li><span class=\"img-text\">Comments</span> ${comments}</a></li>\n          <li><span class=\"img-text\">Downloads</span> ${downloads}</a></li>\n        </ul>\n        </li>`\n        })\n     .join(\"\");\n }\n\nlet options = {\n  captionsData: \"alt\",\n  captionDelay: 250,\n};\nconst lightbox = new SimpleLightbox('.gallery a', options);\n\nexport function renderGallery(images) {\n  galleryList.insertAdjacentHTML(\"beforeend\", createGalleryMarkup(images));\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\ngalleryList.innerHTML = \"\";\n}\n\nconst loader = document.querySelector(\".loader\");\n\nexport function showLoader() {\n  loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n  loader.classList.add(\"hidden\");\n}\n\nconst paginateBtn = document.querySelector(\".load-btn\");\n\nexport function showLoadBtn() {\n  paginateBtn.classList.remove(\"hidden\");\n}\nexport function hideLoadBtn() {\n  paginateBtn.classList.add(\"hidden\");\n}\n\nexport function scroll (){\n  const galleryCard = document.querySelector(\".gallery-item\");\n  if (!galleryCard) return;\n  const rect = galleryCard.getBoundingClientRect().height;\n  const rectHeight = rect * 2;\n  window.scrollBy({\n  top: rectHeight,\n  behavior: \"smooth\",\n  });\n}\n","\nimport searchImages from './js/pixabay-api';\nimport { showError, showInfo, renderGallery, clearGallery, showLoader, hideLoader, showLoadBtn, hideLoadBtn, scroll } from './js/render-functions';\n\nconst searchForm = document.querySelector(\".form\");\nconst searchInput = document.querySelector(\"input\");\nconst paginateBtn = document.querySelector(\".load-btn\");\n\nlet userSearch;\nlet pageNum;\n\nconst onSearch = (event) => {\n    event.preventDefault();  \n    userSearch = searchInput.value.trim();\n    if (userSearch === \"\") {\n        return\n    }\n    clearGallery();\n    showLoader();\n    hideLoadBtn();\n    searchImages(userSearch, 1, (result, totalHits) => {\n        pageNum = 1;\n        hideLoader();\n        if (result.length === 0) {\n            showError();\n            hideLoadBtn();\n        } else {\n            clearGallery();\n            renderGallery(result);\n            showLoadBtn();\n            scroll();\n        }\n        searchInput.value = \"\";\n        \n    });\n}\n\nsearchForm.addEventListener(\"submit\", onSearch);\n\n\nconst getPaginatedImgs = (event) => {\n    event.preventDefault();\n    pageNum += 1;\n    showLoader();\n    searchImages(userSearch, pageNum, (result, totalHits) => {\n        const totalPages = Math.ceil(totalHits / 15);\n        if (pageNum > totalPages) {\n            hideLoadBtn();\n            hideLoader();\n            showInfo();\n        } else {\n            hideLoader();\n            renderGallery(result);\n            scroll();\n        }\n    });\n}\n\npaginateBtn.addEventListener(\"click\", getPaginatedImgs);\n"],"names":["API_KEY","BASE_URL","options","searchImages","query","page","callback","response","axios","showError","iziToast","showInfo","galleryList","createGalleryMarkup","images","comments","downloads","largeImageURL","likes","webformatURL","views","tags","lightbox","SimpleLightbox","renderGallery","clearGallery","loader","showLoader","hideLoader","paginateBtn","showLoadBtn","hideLoadBtn","scroll","galleryCard","rectHeight","searchForm","searchInput","userSearch","pageNum","onSearch","event","result","totalHits","getPaginatedImgs","totalPages"],"mappings":"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"}